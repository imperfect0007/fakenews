services:
  - type: web
    name: deberta-api
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: cd api && uvicorn predict:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: FORCE_CPU
        value: "true"  # Force CPU to save memory (free tier has no GPU)
      - key: LOAD_ON_STARTUP
        value: "false"  # Don't load models on startup (lazy load instead)
      - key: LOAD_MODELS
        value: "both"  # Load both models (change to "deberta" or "bert" for single model)
      # Add your Google Drive File IDs below (get from shareable links)
      - key: DEBERTA_MODEL_GDRIVE_ID
        value: "1_SVoPUDpVEs02LHhLk-fnUop5MjFlELn"  # DeBERTa model File ID
      - key: BERT_MODEL_GDRIVE_ID
        value: "1H9OHoVOJDuFglgoEeAaDu2hNbW50wYlV"  # BERT model File ID
    plan: starter  # Free tier (512MB RAM)
    # Render will set PORT automatically

